{{- $debug_enabled := $.Scratch.Get "debug_enabled" -}}
<link href="https://use.fontawesome.com/releases/v5.0.6/css/all.css" rel="stylesheet">
<link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
<link rel="stylesheet"
      href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css">

<!--for isserver just inline the style so front matter changes reload the style-->

{{- $env := getenv "HUGO_ENV" -}}
{{- $.Scratch.Set "is_css" true -}}
{{- $.Scratch.Set "is_critical" false -}}
<style class="noncritical">
    {{ partial "components/component_generator.html" . | safeCSS }}
</style>

{{ $noncritical := resources.Get "scss/noncritical.scss" | resources.ExecuteAsTemplate "noncritical.scss" . | toCSS | minify | fingerprint }}

{{ if eq $.Site.Params.postcss_testing true }}
<!--use a resource for producition-->
    {{ $noncritical = resources.Get "scss/noncritical.scss" | resources.ExecuteAsTemplate "noncritical.scss" . | toCSS | postCSS | minify | fingerprint }}   
<link rel="stylesheet" href="{{ $noncritical.Permalink }}" media="screen"> 
{{ end }}

{{ if eq $.Site.Params.debug_enabled true }}

{{ $debugstyles := resources.Get "scss/debug.scss" | resources.ExecuteAsTemplate "style.main.scss" . | toCSS | minify | fingerprint }}
{{ $debug_js := resources.Get "js/pancakes_debug.js" | minify }}

<script type="text/javascript">
  fetchInject([
    '{{ $debugstyles.Permalink }}',
    '{{ $debug_js.Permalink }}'
  ]).then(() => {
        console.log(`Loaded debugger css`);
  })
  </script>

{{/* <!--Add Debugger HTMl block--> */}}

{{- block "debug_bar" . -}}

{{- end -}}
{{ end }}

{{/* <!--enable debug--> */}}



<!--pancakes JS-->
<!-- <script src="js/pancakes_debug.js"></script> -->
<!-- <script src="js/navigation.js"></script> -->

